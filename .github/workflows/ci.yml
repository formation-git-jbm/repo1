name: remote ssh command

#on: [push]

on:
  push:
    branches: [ main ]
    
jobs:
  build:
    name: Build
    runs-on: self-hosted
    steps:
    - name: Checkout repo
      uses: actions/checkout@v2.3.2
    - name: "Move source"
      run: |
          pwd
          echo "List dir"
          ls -la
          echo ${{ env.SECRECTNAME }}
          #echo "move sources to ..."
          #cp -Rf ../repo1 /home/ubuntu/GitHubAction/deployment
          #
          #DIR_MOODLE=/opt/moodle
          #DIR_THEME=${DIR_MOODLE}/theme
          #          
          ##chown -R ubuntu ${DIR_MOODLE}
          #cp -Rf ../repo1 ${DIR_THEME}
          
    - name: ðŸ“‚ Sync files
      uses: SamKirkland/FTP-Deploy-Action@4.0.0
      with:
        server: ${{ secrets.ftp_server }}
        username: ${{ secrets.ftp_user }}
        password: ${{ secrets.ftp_password }}
        #server-dir: githubaction/
        local-dir: /githubaction/
        state-name: ./.sync-state.json
        log-level: verbose
        exclude: Git.pdf
          - Git.pptx
          - fichier.txt
          - index.html
          - titi.txt