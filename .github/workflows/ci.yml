name: remote ssh command

#on: [push]

on:
  push:
    branches: [ main ]
    
jobs:
  build:
    name: Build
    runs-on: self-hosted
    steps:
    - name: Checkout repo
      uses: actions/checkout@v2
    - name: "Move source"
      run: |
          pwd
          echo "List dir"
          ls -la
          echo "move sources to ..."
          cp -Rf ../repo1 /home/ubuntu/GitHubAction/deployment
          
          DIR_MOODLE=/opt/moodle
          DIR_THEME=${DIR_MOODLE}/theme
                    
          #chown -R ubuntu ${DIR_MOODLE}
          cp -Rf ../repo1 ${DIR_THEME}
          
    - name: ðŸ“‚ Sync files
      uses: SamKirkland/FTP-Deploy-Action@4.0.0
      with:
        server: 5.135.92.181
        username: ubuntu
        password: ${{ secrets.ftp_password }}
        server-dir: ./home/ubuntu/GitHubAction/FTP
        state-name: home/ubuntu/GitHubAction/FTP/.sync-state.json
        exclude: Git.pdf
          - Git.pptx
          - fichier.txt
          - index.html
          - titi.txt
          - .github/*